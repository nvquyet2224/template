<!DOCTYPE HTML>
<html lang="vi" class="useFull">

<head>
<meta charset="utf-8">
<title>Template</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

<style type="text/css">
	body{
		margin:0;
		padding:0;
		width:100vw;
		height:100vh;
		overflow:hidden;
		cursor:pointer;
	}
	
</style>
</head>

<body>

<div class="main">
<canvas id="canvas"></canvas>
</div>

<script>

	var canvas = document.getElementById("canvas");
	var ctx = canvas.getContext("2d");
	canvas.width = screen.width;
	canvas.height = screen.height;

	var mouse = {x: screen.width/2, y: screen.height/2, moused:true}
	
	var circle = {
		x: mouse.x,
		y: mouse.y,
		radius:225
	}
	var scale = 1.1;
	function drawBall() {
		
		ctx.save();
		
		if(mouse.moused) {
			ctx.beginPath();
			circle.x += (mouse.x - circle.x)*0.1;
			circle.y += (mouse.y - circle.y)*0.1;
			ctx.arc(circle.x, circle.y, circle.radius, 0, Math.PI * 2, false);
			ctx.closePath();
			ctx.clip();
			ctx.drawImage(imgMask,0,0);
			ctx.restore();
			
		}else {
			ctx.beginPath();
			circle.x = circle.x;
			circle.y = circle.y;
			ctx.arc(circle.x, circle.y,  screen.width, 0, Math.PI * 2, false);
			ctx.closePath();
			ctx.clip();
			ctx.drawImage(imgMask,0,0);
		}
		
		ctx.restore();
		
	}
	var imgBg = new Image();
	imgBg.src = "images/bg1.jpg";
	
	var imgMask = new Image();
	imgMask.src = "images/bg2.jpg";
	
	function draw() {
		ctx.clearRect(0, 0, screen.width, screen.height);
		ctx.drawImage(imgBg,0,0);
		drawBall();
		requestAnimationFrame(draw);
	}
	
	function mousemove(e) {
	  mouse.x = e.pageX;
	  mouse.y = e.pageY;
	}

	draw();
	
	function resize() {
	  //width = canvas.width = window.innerWidth;
	  //height = canvas.height = window.innerHeight;
	}
	
	window.addEventListener("click", function(event) {
		if(mouse.moused){
			mouse.moused = false;
		}else {
			mouse.moused = true;
		}
	});
	
	window.addEventListener('resize', resize);
	//window.addEventListener('touchstart', touch);
	//window.addEventListener('touchmove', touch);
	window.addEventListener('mousemove', mousemove);
	

</script>

</body>
</html>
