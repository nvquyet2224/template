function DirectLink(){$(document).on("click",".direct-link",function(t){t.preventDefault();var e=$(this).attr("href");return $("body").stop().animate({opacity:0},100,"linear",function(){window.location=e}),!1})}function inputHolder(){$(".mask-input").on("click",function(){$(this).parent().addClass("hide"),$(this).next().focus()}),$("input, textarea").focus(function(){$(this).parent().find(".nameformError").remove(),$(this).parent().addClass("hide").removeClass("show-error"),$(this).attr("data-holder")==$(this).val()&&$(this).val("")}).focusout(function(){""==$(this).val()&&($(this).parent().removeClass("hide"),$(this).val($(this).attr("data-holder")))})}function CommonEvent(){navBut.on("click",function(){navBut.hasClass("active")?(navBut.removeClass("active"),doCument.removeClass("no-scroll"),navigation.classList.remove("active"),navigation.style.height="0px"):(navBut.addClass("active"),doCument.addClass("no-scroll"),navigation.classList.add("active"),navigation.style.height=window.innerHeight+"px")}),toTop.on("click",function(){doCument.animate({scrollTop:0},400)}),navigation.addEventListener("touchmove",function(t){$(window).height()>500&&t.preventDefault()}),navCnt.addEventListener("touchmove",function(t){navBox.clientHeight>navCnt.clientHeight&&t.stopPropagation()}),popCnt&&(popCnt.addEventListener("touchmove",function(t){$(window).height()>500&&t.preventDefault()}),popWrp.addEventListener("touchmove",function(t){popBox.clientHeight>popWrp.clientHeight&&t.stopPropagation()})),openPop.on("click",function(){doCument.addClass("no-scroll"),popCnt.style.height=window.innerHeight+"px",setTimeout(function(){popCnt.classList.add("active")},310)}),closePop.on("click",function(){doCument.removeClass("no-scroll"),popCnt.classList.remove("active"),popCnt.style.height="0px"}),$(document).on("click",".success-order .more",function(){doCument.removeClass("no-scroll"),popCnt.classList.remove("active"),popCnt.style.height="0px"}),inputHolder(),selectEvent()}function change_alias(t){var e=t;return e=e.toLowerCase(),e=e.replace(/à|á|ạ|ả|ã|â|ầ|ấ|ậ|ẩ|ẫ|ă|ằ|ắ|ặ|ẳ|ẵ/g,"a"),e=e.replace(/è|é|ẹ|ẻ|ẽ|ê|ề|ế|ệ|ể|ễ/g,"e"),e=e.replace(/ì|í|ị|ỉ|ĩ/g,"i"),e=e.replace(/ò|ó|ọ|ỏ|õ|ô|ồ|ố|ộ|ổ|ỗ|ơ|ờ|ớ|ợ|ở|ỡ/g,"o"),e=e.replace(/ù|ú|ụ|ủ|ũ|ư|ừ|ứ|ự|ử|ữ/g,"u"),e=e.replace(/ỳ|ý|ỵ|ỷ|ỹ/g,"y"),e=e.replace(/đ/g,"d"),e=e.replace(/!|@|%|\^|\*|\(|\)|\+|\=|\<|\>|\?|\/|,|\.|\:|\;|\'|\"|\&|\#|\[|\]|~|\$|_|`|-|{|}|\||\\/g," "),e=e.replace(/ + /g," "),e=e.trim()}function getDistrict(t,e){var i="";1==t?i="hcm.html":2==t&&(i="binhduong.html"),0==t?($(e).find("span").text("Quận/Huyện(*)"),$(e).find("input").val("Tìm kiếm ..."),$(e).find("ul").html('<li data-district="0">Quận/Huyện(*)</li>')):$.ajax({url:i,cache:!1,success:function(t){$(e).find("span").text("Quận/Huyện(*)"),$(e).find("input").val("Tìm kiếm ..."),$(e).find("ul").html(t)}})}function getTown(t,e,i){var n="";1==t?n="town.html":2==t&&(n="town-bd.html"),0==t||0==e?($(i).find("span").text("Phường/Xã(*)"),$(i).find("input").val("Tìm kiếm ..."),$(i).find("ul").html('<li data-town="0">Phường/Xã(*)</li>')):$.ajax({url:n,cache:!1,success:function(t){$(i).find("span").text("Phường/Xã(*)"),$(i).find("input").val("Tìm kiếm ..."),$(i).find("ul").html(t)}})}function selectEvent(){$(document).on("keyup",".select-sort input",function(t){t.stopPropagation();var e=$(this),i=change_alias(e.val()),n=$(this).parent().parent().parent(),a=n.find("ul");if(13==t.keyCode){if(n.find("li.selected").length)if(n.find(".select-header span").text(n.find("li.selected").text()),n.removeClass("open"),n.parent().removeClass("hide"),n.find("li.selected").attr("data-city")){var s=n.find("li.selected").attr("data-city"),o=null,r=null;n.hasClass("is-city")?(o=$(".is-district"),r=$(".is-town")):n.hasClass("is-city-edit")&&(o=$(".is-district-edit"),r=$(".is-town-edit")),o.parent().removeClass("hide"),r.parent().removeClass("hide"),r.find("span").text("Phường/Xã(*)"),r.find("input").val("Tìm kiếm ..."),r.find("ul").html('<li data-town="0">Phường/Xã(*)</li>'),getDistrict(s,o)}else if(n.find("li.selected").attr("data-district")){var r=null,s=null,l=null;n.hasClass("is-district")?(r=$(".is-town"),s=$(".is-city li.selected").attr("data-city")||0,l=$(".is-district li.selected").attr("data-district")||0):n.hasClass("is-district-edit")&&(r=$(".is-town-edit"),s=$(".is-city-edit li.selected").attr("data-city")||0,l=$(".is-district-edit li.selected").attr("data-district")||0),r.parent().removeClass("hide"),r.find("span").text("Phường/Xã(*)"),r.find("input").val("Tìm kiếm ..."),r.find("ul").html('<li data-town="0">Phường/Xã(*)</li>'),getTown(s,l,r)}}else{if(38==t.keyCode){t.preventDefault();var c=n.find("li.selected").prevAll("li").not(".hide").first();if(c.length){n.find("li").removeClass("selected"),c.addClass("selected");var d=a.scrollTop();a.scrollTop(d-30)}else a.scrollTop(0),n.find("li").removeClass("selected"),n.find("li:first-child").addClass("selected");return!1}if(40==t.keyCode){t.preventDefault();var m=n.find("li.selected").nextAll("li").not(".hide").first();if(m.length){n.find("li").removeClass("selected"),m.addClass("selected");var d=a.scrollTop();a.scrollTop(d+30)}else a.scrollTop(0),n.find("li").removeClass("selected"),n.find("li:first-child").addClass("selected");return!1}""==i?(n.find("li").removeClass("hide").removeClass("selected"),$(a).scrollTop(0)):(n.find("li").removeClass("selected"),n.find("li").each(function(t,e){var a=change_alias($(e).text());a.indexOf(i)>-1?($(e).removeClass("hide"),n.find("li:not(.hide)").first().addClass("selected")):$(e).addClass("hide")}))}}),$(document).on("click",".select-header",function(){var t=$(this).parent();t.parent().removeClass("show-error"),t.parent().find(".nameformError").remove(),t.hasClass("open")?t.removeClass("open"):($(".select-list").removeClass("open"),t.addClass("open"))}),$(document).on("click",".select-box li",function(){var t=$(this),e=$(this).parent().parent().parent();if(!t.hasClass("selected"))if(e.find("li").removeClass("selected"),t.addClass("selected"),e.removeClass("open"),e.find(".select-header span").html(t.text()),e.parent().removeClass("hide"),t.attr("data-city")){var i=t.attr("data-city"),n=null,a=null;e.hasClass("is-city")?(n=$(".is-district"),a=$(".is-town")):e.hasClass("is-city-edit")&&(n=$(".is-district-edit"),a=$(".is-town-edit")),n.parent().removeClass("hide"),a.parent().removeClass("hide"),a.find("span").text("Phường/Xã(*)"),a.find("input").val("Tìm kiếm ..."),a.find("ul").html('<li data-town="0">Phường/Xã(*)</li>'),getDistrict(i,n)}else if(t.attr("data-district")){var a=null,i=null,s=null;e.hasClass("is-district")?(a=$(".is-town"),i=$(".is-city li.selected").attr("data-city")||0,s=$(".is-district li.selected").attr("data-district")||0):e.hasClass("is-district-edit")&&(a=$(".is-town-edit"),i=$(".is-city-edit li.selected").attr("data-city")||0,s=$(".is-district-edit li.selected").attr("data-district")||0),a.parent().removeClass("hide"),a.find("span").text("Phường/Xã(*)"),a.find("input").val("Tìm kiếm ..."),a.find("ul").html('<li data-town="0">Phường/Xã(*)</li>'),getTown(i,s,a)}}),$(document).on("click touchstart",function(t){0!=$(".select-list").has(t.target).length||$(".select-list").is(t.target)||$(".select-list").removeClass("open")})}function hideerror(){$(".nameformError").remove()}function hidemsg(){$(".feedback-message").remove()}function loginValidate(){var t=!0;return""==$("#user_name").val()&&($("#user_name").parent().find(".nameformError").remove(),$("#user_name").parent().addClass("show-error"),$("#user_name").after('<div class="nameformError">*Thông tin không hợp lệ. Vui lòng nhập lại!</div>'),t=!1),""==$("#user_phone").val()&&($("#user_phone").parent().find(".nameformError").remove(),$("#user_phone").parent().addClass("show-error"),$("#user_phone").after('<div class="nameformError">*Số điện thoại phải là số!</div>'),t=!1),""==$("#user_vinid").val()&&($("#user_vinid").parent().find(".nameformError").remove(),$("#user_vinid").parent().addClass("show-error"),$("#user_vinid").after('<div class="nameformError">*Số thẻ phải là số!</div>'),t=!1),""==$("#user_email").val()&&($("#user_email").parent().find(".nameformError").remove(),$("#user_email").parent().addClass("show-error"),$("#user_email").after('<div class="nameformError">*Email không đúng định dạng!</div>'),t=!1),t}function orderValidate(){var t=!0;return""==$("#order_user_name").val()&&($("#order_user_name").parent().find(".nameformError").remove(),$("#order_user_name").parent().addClass("show-error"),$("#order_user_name").after('<div class="nameformError">*Thông tin không hợp lệ. Vui lòng nhập lại!</div>'),t=!1),""==$("#order_user_phone").val()&&($("#order_user_phone").parent().find(".nameformError").remove(),$("#order_user_phone").parent().addClass("show-error"),$("#order_user_phone").after('<div class="nameformError">*Số điện thoại phải là số!</div>'),t=!1),""==$("#order_user_email").val()&&($("#order_user_email").parent().find(".nameformError").remove(),$("#order_user_email").parent().addClass("show-error"),$("#order_user_email").after('<div class="nameformError">*Email không đúng định dạng!</div>'),t=!1),""==$("#order_address").val()&&($("#order_address").parent().find(".nameformError").remove(),$("#order_address").parent().addClass("show-error"),$("#order_address").after('<div class="nameformError">*Địa chỉ không được rỗng!</div>'),t=!1),$(".is-city li.selected").length&&"0"!=$(".is-city li.selected").attr("data-city")||($(".is-city").parent().find(".nameformError").remove(),$(".is-city").parent().addClass("show-error"),$(".is-city").after('<div class="nameformError">Bạn phải chọn Thành phố!</div>'),t=!1),$(".is-district li.selected").length&&"0"!=$(".is-district li.selected").attr("data-district")||($(".is-district").parent().find(".nameformError").remove(),$(".is-district").parent().addClass("show-error"),$(".is-district").after('<div class="nameformError">Bạn phải chọn Quận huyện!</div>'),t=!1),$(".is-town li.selected").length&&"0"!=$(".is-town li.selected").attr("data-town")||($(".is-town").parent().find(".nameformError").remove(),$(".is-town").parent().addClass("show-error"),$(".is-town").after('<div class="nameformError">Bạn phải chọn Phường xã!</div>'),t=!1),t}function cartProgress(){$("#cart-page").length&&($(document).on("click",".add-but",function(){}),$(document).on("click",".sub-but",function(){}),$(document).on("click",".delete-but",function(){$(".message-box").removeClass("hide"),setTimeout(function(){doCument.addClass("no-scroll"),popCnt.style.height=window.innerHeight+"px",setTimeout(function(){popCnt.classList.add("active")},310)},310)}),$(document).on("click",".confirm_delete",function(){}),$(document).on("click",".confirm_cancel",function(){closePop.trigger("click")}))}function productLoad(t){$.ajax({url:t,cache:!1,success:function(t){$(".product-box").html(t),onScroll(),$(".product-box").stop().animate({opacity:1},500,"linear",function(){loading=!0})}})}function Start(){var t=$("body").attr("id");$(".nav li[data-active='"+t+"']").addClass("active"),$(document).on("click",".go-focus-box",function(){var t=66;$("#products-page").length&&$(window).width()>1100&&(t=40);var e=$(".focus-box").offset().top-t;doCument.stop().animate({scrollTop:e},400)}),$(document).on("click","#login_but",function(){$(".success-login, .message-box").addClass("hide"),loginValidate()?(setTimeout(function(){$(".success-login").removeClass("hide"),doCument.addClass("no-scroll"),popCnt.style.height=window.innerHeight+"px",setTimeout(function(){popCnt.classList.add("active")},310),setTimeout(function(){closePop.trigger("click"),window.location="products.html"},3e3)},310),document.getElementById("login_form").reset(),$(".field").removeClass("hide")):($(".message-box").removeClass("hide"),setTimeout(function(){doCument.addClass("no-scroll"),popCnt.style.height=window.innerHeight+"px",setTimeout(function(){popCnt.classList.add("active")},310),setTimeout(function(){closePop.trigger("click")},3e3)},310))}),$(document).on("click","#logout_but",function(){}),$(document).on("click",".filter-but",function(){if(loading){loading=!1;var t=$(this).attr("data-url");$(".filter-box li").removeClass("active"),$(this).parent().addClass("active"),$(".product-box").stop().animate({opacity:0},300,"linear",function(){productLoad(t)})}}),$(document).on("click",".add-to-cart",function(){doCument.addClass("no-scroll"),popCnt.style.height=window.innerHeight+"px",setTimeout(function(){popCnt.classList.add("active")},310)}),$(document).on("click",".btn.grey",function(){var t=$(this).attr("href"),e={id:$(this).attr("data-id"),image:$(this).attr("data-image"),name:$(this).attr("data-name"),promotion:$(this).attr("data-promotion"),price:$(this).attr("data-price"),oprice:$(this).attr("data-oprice"),accumulating:$(this).attr("data-accumulating"),quantity:1};addCart(e),setTimeout(function(){this.loadicon=t},300)}),$(document).on("click","input.byCompany, input.byCustomer",function(){this.checked?this.classList.contains("byCompany")?($(".is-company").addClass("active"),setTimeout(function(){$(".is-company").addClass("on")},0)):this.classList.contains("byCustomer")&&($(".is-customer").addClass("active"),setTimeout(function(){$(".is-customer").addClass("on")},0)):this.classList.contains("byCompany")?$(".is-company").removeClass("active").removeClass("on"):this.classList.contains("byCustomer")&&$(".is-customer").removeClass("active").removeClass("on")}),$(document).on("click","#order_but",function(t){if(t.preventDefault(),orderValidate())$(".message-box").removeClass("hide"),setTimeout(function(){doCument.addClass("no-scroll"),popCnt.style.height=window.innerHeight+"px",setTimeout(function(){popCnt.classList.add("active")},310)},310);else{var e=$(".order-box").offset().top-80;doCument.stop().animate({scrollTop:e},400)}return!1})}function ImgLazyLoad(){var t=$(window).height();lazyImages.each(function(e,i){if(!($(i)[0].getBoundingClientRect().top<=2*t))return!1;var n=$(i).attr("data-img-src");$(i).attr("src",n),$(i).removeClass("lazy")})}function BgLazyLoad(){var t=$(window).height();lazyBgs.each(function(e,i){if(!($(i)[0].getBoundingClientRect().top<=2*t))return!1;var n=$(i).attr("data-img-src");$(i).css({"background-image":"url("+n+")"}),$(i).removeClass("lazy")})}function onScroll(){var t=$(window).scrollTop(),e=$(window).width(),i=$(window).height();imgClass=e>1100?".pcPic.lazy, .cmPic.lazy":".spPic.lazy, .cmPic.lazy",lazyImages=$(imgClass),lazyImages.length&&ImgLazyLoad(),bgClass=e>1100?".pcBg.lazy, .cmBg.lazy":".spBg.lazy, .cmBg.lazy",lazyBgs=$(bgClass),lazyBgs.length&&BgLazyLoad(),t>i/2?toTop.addClass("show"):toTop.removeClass("show")}function onResize(){}function endResize(){var t=$(window).width();navigation&&navigation.classList.contains("active")&&(navigation.style.height=window.innerHeight+"px"),popCnt&&popCnt.classList.contains("active")&&(popCnt.style.height=window.innerHeight+"px"),isMobile||(imgClass=t>1100?".pcPic.lazy, .cmPic.lazy":".spPic.lazy, .cmPic.lazy",lazyImages=$(imgClass),ImgLazyLoad(),bgClass=t>1100?".pcBg.lazy, .cmBg.lazy":".spBg.lazy, .cmBg.lazy",lazyBgs=$(bgClass),BgLazyLoad())}function onRotate(){setTimeout(function(){var t=$(window).width();navigation&&navigation.classList.contains("active")&&(navigation.style.height=window.innerHeight+"px"),popCnt&&popCnt.classList.contains("active")&&(popCnt.style.height=window.innerHeight+"px"),imgClass=t>1100?".pcPic.lazy, .cmPic.lazy":".spPic.lazy, .cmPic.lazy",lazyImages=$(imgClass),ImgLazyLoad(),bgClass=t>1100?".pcBg.lazy, .cmBg.lazy":".spBg.lazy, .cmBg.lazy",lazyBgs=$(bgClass),BgLazyLoad()},200)}var doCument=$("html, body"),header=$(".header"),navBut=$(".nav-but"),navigation=document.querySelector(".navigation"),navCnt=document.querySelector(".nav"),navBox=document.querySelector(".nav ul"),accountBut=$(".account-but"),toTop=$(".to-top"),popCnt=document.querySelector(".popup-content"),popWrp=document.querySelector(".popup-wrap"),popBox=document.querySelector(".popup-box"),openPop=$(".show-pop"),closePop=$(".close-pop"),cart=document.querySelector(".cart-shopping"),cartNum=document.querySelector(".cart-text"),cartJSON=[],imgClass,lazyImages,bgClass,lazyBgs,first=!0,isClick=!1,ctnWrap,ctnBox,ctnItem,loading=!0;$(document).ready(function(){var t=$(window).width();$("body").addClass("isLogin"),cartProgress(),CommonEvent(),DirectLink(),imgClass=t>1100?".pcPic.lazy, .cmPic.lazy":".spPic.lazy, .cmPic.lazy",lazyImages=$(imgClass),ImgLazyLoad(),bgClass=t>1100?".pcBg.lazy, .cmBg.lazy":".spBg.lazy, .cmBg.lazy",lazyBgs=$(bgClass),BgLazyLoad(),setTimeout(function(){window.scrollTo(0,0),onScroll(),$(".loadicon").fadeOut(300,function(){$(".content").stop().animate({opacity:1},500,"linear",function(){Start()})})},1500)}),$(window).on("orientationchange",onRotate),$(window).resize(onResize),$(window).on("resize",endResize,250),$(window).scroll(onScroll),iOS&&$(window).bind("pageshow",function(t){t.originalEvent.persisted&&window.location.reload()});