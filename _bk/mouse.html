<!DOCTYPE HTML>
<html lang="vi" class="useFull">

<head>
<meta charset="utf-8">
<title>Template</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimum-scale=1.0, maximum-scale=1.0">

<style type="text/css">
body {
  overflow: hidden;
}

svg {
  position: absolute;
  top: 0;
  left: 0;
  height: 100%;
  width: 100%;
}

line {
  stroke: #3f51b5;
  stroke-width: 2;
}

p {
  margin: 10px;
  color: #999;
}

</style>
</head>

<body>
<p>Move your mouse...</p>
<svg></svg>

<!--Tween-->
<script src='js/TweenMax.min.js'></script>
<script src='js/ModifiersPlugin-latest-beta.js'></script>

<script src='js/jquery.js'></script>

<script>

TweenLite.defaultEase = Linear.easeNone;

var svgns = "http://www.w3.org/2000/svg";
var root = document.querySelector("svg");
var ease = 0.75;

var pointer = { 
  x: window.innerWidth  / 2, 
  y: window.innerHeight / 2 
};

window.addEventListener("mousemove", function(event) {
  pointer.x = event.clientX;
  pointer.y = event.clientY;
});

var leader = pointer;

var total = 50;
for (var i = 0; i < total; i++) {
  leader = createLine(leader, i);
}

function createLine(leader, i) {
  
  var line = document.createElementNS(svgns, "line");
  root.appendChild(line);
  
  TweenLite.set(line, { x: -15, y: -15, alpha: (total - i) / total });
  
  var pos = line._gsTransform;
  
  TweenMax.to(line, 1000, {
    x: "+=1",
    y: "+=1",
    repeat: -1,
    modifiers: {
      x: function() {        
        var x = pos.x + (leader.x - pos.x) * ease;
        line.setAttribute("x2", leader.x - x);
        return x;
      },
      y: function() {        
        var y = pos.y + (leader.y - pos.y) * ease;
        line.setAttribute("y2", leader.y - y);
        return y;
      }
    }
  });  
  
  return pos;
}

</script>

</body>
</html>
