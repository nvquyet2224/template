var overlayGallery,overlayPromotion,fullscreenStatus=!1,viewData=[],countSlide=0,limitViewNumber=6,promotionShow=!1,paddingNumber=100,fullscreenElem=document.getElementById("carouselGalleryDetail"),players=[],slideData={curSlide:0,show:!1},YTdeferred=$.Deferred();window.onYouTubeIframeAPIReady=function(){YTdeferred.resolve(window.YT)},$(document).ready(function(){if($(".btn-thumbnail-view").click(function(){$("#mygallery").resetGallery().setThumbnailView({amountItem:6,marginItem:2}),$(this).addClass("active")}),$(".btn-justified-view").click(function(){$("#mygallery").resetGallery().setJustifiedView(),$(this).addClass("active")}),$(".btn-tile-view").click(function(){$("#mygallery").resetGallery().setTileView({amountItem:4,marginItem:2}),$(this).addClass("active")}),$("#mygallery").setJustifiedView(),$('[data-toggle="popover"]').popover(),overlayGallery=$(".overlay-gallery"),overlayPromotion=overlayGallery.find(".promotion"),overlayGallery.length){function n(e,t){var l;return"prev"==t?0==(l=e.prev()).length&&(l=e.siblings().last()):0==(l=e.next()).length&&(l=e.siblings().first()),l}function s(e){var t=e.find(".video-player").prop("id"),l=e.find(".video-player").data("videoid");if(void 0===t)return!1;if(void 0===players[t]){var i=new YT.Player(t,{height:"390",width:"640",videoId:l,playerVars:{showinfo:0,rel:0,modestbranding:0},events:{onReady:onPlayerReady,onStateChange:onPlayerStateChange}});players[t]=i}}function c(e){var t=e.find(".video-player").prop("id");void 0!==players[t]&&players[t].stopVideo()}function d(e){var t=n(e,"prev"),l=n(e,"next");i(e),i(l),i(t)}function i(e){var t=e.find(".image-wrapper");if(0!=t.length){var l=$('<img alt="" />'),i=new Image;i.onload=function(){l.prop("src",this.src),imgHeight=l.prop("naturalHeight"),imgWidth=l.prop("naturalWidth"),ratioImg=imgWidth/imgHeight,ratioImg<viewData.ratioView?l.css({"max-height":viewData.viewHeight,"max-width":"auto"}):l.css({"max-width":"100%","max-height":"auto"})},i.src=t.data("imagesrc"),t.replaceWith(l)}}function e(){0==fullscreenStatus?(fullscreenStatus=!0,$(".btn-fullscreen").find("img.on").css("display","none"),$(".btn-fullscreen").find("img.off").css("display","block"),overlayPromotion.appendTo(".carousel"),overlayGallery.find(".overlay-content").setViewer2(screen.height,screen.width,0,!0)):(fullscreenStatus=!1,$(".btn-fullscreen").find("img.on").css("display","block"),$(".btn-fullscreen").find("img.off").css("display","none"),overlayPromotion.appendTo(overlayGallery.find(".overlay-content")),overlayGallery.find(".overlay-content").setViewer2($(window).height(),$(window).width(),paddingNumber,!0))}overlayGallery.find(".overlay-title").find("a").html(overlayGallery.find(".carousel .carousel-item").first().data("title")),overlayGallery.find(".carousel").hasClass("images")&&(overlayGallery.find(".overlay-title").find("a").html(overlayGallery.find(".carousel").data("title")),overlayGallery.find(".overlay-content > .right-content .description").html(overlayGallery.find(".carousel .carousel-item").first().data("title"))),overlayGallery.find(".overlay-content").setViewer2($(window).height(),$(window).width(),paddingNumber,!1),overlayGallery.find(".carousel").on("slid.bs.carousel",function(e){slideData.curSlide=e.to,countSlide==limitViewNumber&&(promotionShow=!0,countSlide=0)}),overlayGallery.find(".carousel .carousel-control-prev").click(function(){overlayGallery.find(".carousel").carousel("prev")}),overlayGallery.find(".carousel .carousel-control-next").click(function(){overlayGallery.find(".carousel").carousel("next")}),overlayGallery.find(".carousel").on("slide.bs.carousel",function(e){var t,l,i,r,a,o=$(e.relatedTarget);if(overlayGallery.find(".carousel").hasClass("video")?(a=n(r=o,"prev"),c(n(r,"next")),c(a),l=n(t=o,"next"),i=n(t,"prev"),s(t),s(l),s(i)):overlayGallery.find(".carousel").hasClass("images")&&d(o),1==promotionShow)return $(".overlay-title a").html(""),overlayPromotion.addClass("show"),promotionShow=!1;overlayGallery.find(".carousel").hasClass("images")?(overlayGallery.find(".overlay-title").find("a").html(overlayGallery.find(".carousel").data("title")),overlayGallery.find(".overlay-content > .right-content .description").html(o.data("title"))):$(".overlay-title a").html(o.data("title")),overlayPromotion.removeClass("show"),countSlide++}),overlayGallery.find("a.close-popup").click(function(){c($(".carousel.video .carousel-item.active")),countSlide=0,overlayGallery.css("display","none"),overlayPromotion.removeClass("show"),$("body").css("overflow","visible")}),overlayGallery.find(".promotion .btn-close").click(function(){countSlide=0,overlayPromotion.removeClass("show")}),$(".open-overlay").click(function(){$("body").css("overflow","hidden");var e=$(this).data("number");e==slideData.curSlide&&countSlide++,overlayGallery.fadeIn(),overlayGallery.find(".carousel").carousel(e)}),$(".btn-fullscreen").click(function(){0==fullscreenStatus?fullscreenElem.requestFullscreen?fullscreenElem.requestFullscreen():fullscreenElem.mozRequestFullScreen?fullscreenElem.mozRequestFullScreen():fullscreenElem.webkitRequestFullscreen?fullscreenElem.webkitRequestFullscreen():fullscreenElem.msRequestFullscreen&&fullscreenElem.msRequestFullscreen():document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen()}),document.addEventListener("fullscreenchange",e),document.addEventListener("webkitfullscreenchange",e),document.addEventListener("mozfullscreenchange",e),document.addEventListener("MSFullscreenChange",e)}($(".carousel-item .control-item").click(function(){return $(this).hasClass("control-prev")?(overlayGallery.find(".carousel").carousel("prev"),!1):$(this).hasClass("control-next")?(overlayGallery.find(".carousel").carousel("next"),!1):void 0}),0<overlayGallery.find(".carousel.images").length)&&d(overlayGallery.find(".carousel .carousel-item").first());function t(){var e=getCookie("slideData");return void 0!==e&&(getCookie("oldUrl")==window.location.href&&void((slideData=JSON.parse(e)).show&&($("body").css("overflow","hidden"),countSlide++,overlayGallery.fadeIn(),overlayGallery.find(".carousel").carousel(slideData.curSlide))))}0<overlayGallery.find(".carousel.video").length?YTdeferred.done(function(e){s(overlayGallery.find(".carousel .carousel-item").first()),t()}):t()}),$(document).keydown(function(e){if(void 0!==e&&overlayGallery.find(".carousel").is(":visible")){if(37===e.keyCode)return overlayGallery.find(".carousel").carousel("prev"),!1;if(39===e.keyCode)return overlayGallery.find(".carousel").carousel("next"),!1}}),$(window).scroll(function(e){84<=$(window).scrollTop()?($(".banner-ads").css("top","0"),$(".banner-ads").css("position","fixed")):($(".banner-ads").css("top","84px"),$(".banner-ads").css("position","absolute"))}),$(window).resize(function(){0==fullscreenStatus&&overlayGallery.find(".overlay-content").setViewer2($(window).height(),$(window).width(),paddingNumber,!0)}),function(f){f.fn.setViewer2=function(e,t,l,i){var r=e-l,a=t-l,o=r,n=.7*a;1==fullscreenStatus&&(n=a);var s=n/o;if(viewData={ratioView:s,viewHeight:o,viewWidth:n},f(this).css({height:r,width:a,"margin-top":r/2*-1,"margin-left":a/2*-1,top:"50%",left:"50%"}),f(this).find(".promotion .left-content").css({width:n,height:o}),f(this).find(".promotion .right-content").css({width:a-n,height:o}),f(this).find(".left-content").css({width:n,height:o}),f(this).find(".carousel-item .content-center").css({width:n,height:o}),1==i)for(var c,d=f(this).find(".carousel-item img"),u=0;u<d.length;u++)c=d.eq(u).prop("naturalHeight"),d.eq(u).prop("naturalWidth")/c<s?d.eq(u).css({"max-height":o,"max-width":"auto"}):d.eq(u).css({"max-width":"100%","max-height":"auto"})},f.fn.setThumbnailView=function(e){var t=f.extend({amountItem:6,marginItem:2},t),l=f("main").width();$h=$w=l/t.amountItem-2*t.marginItem,f(this).addClass("thumbnail-view"),f(this).find(".item").css({height:$h,width:$w,margin:t.marginItem});for(var i,r=f(this).find("img"),a=0;a<r.length;a++)i=r.eq(a).prop("naturalHeight"),1<=r.eq(a).prop("naturalWidth")/i?r.eq(a).css({height:$h}):r.eq(a).css({width:$w})},f.fn.setTileView=function(e){var t=f.extend({amountItem:4,marginItem:2},t),l=f("main").width();$w=l/t.amountItem-2*t.marginItem,$h=195,f(this).addClass("tile-view"),f(this).find(".item").css({width:$w,margin:t.marginItem}),f(this).find(".item > a").css({height:$h});for(var i,r=f(this).find("img"),a=0;a<r.length;a++)i=r.eq(a).prop("naturalHeight"),1<=r.eq(a).prop("naturalWidth")/i?r.eq(a).css({width:"100%"}):r.eq(a).css({height:$h})},f.fn.setJustifiedView=function(){return f(this).justifiedGallery({rowHeight:195,margins:4,cssAnimation:!1,imagesAnimationDuration:0}),f(this)},f.fn.resetGallery=function(){return f(".gallery-toolbar .btn-view-control").removeClass("active"),f(this).justifiedGallery("destroy"),f(this).removeAttr("class style"),f(this).find(".item").removeAttr("class style").addClass("item"),f(this).find("a").removeAttr("style"),f(this).find("img").removeAttr("style"),f(this)}}(jQuery);var tag=document.createElement("script");tag.src="https://www.youtube.com/iframe_api";var firstScriptTag=document.getElementsByTagName("script")[0];function onPlayerReady(e){e.target.setVolume(0)}function onPlayerStateChange(e){e.data==YT.PlayerState.ENDED&&setTimeout(function(){overlayGallery.find(".carousel").carousel("next")},1e3)}function setCookie(e,t,l,i){var r=new Date;0<l?r.setTime(r.getTime()+24*l*60*60*1e3):r.setTime(r.getTime()+1e3*i);var a="expires="+r.toUTCString();document.cookie=e+"="+t+";"+a+";path=/"}function getCookie(e){for(var t=e+"=",l=decodeURIComponent(document.cookie).split(";"),i=0;i<l.length;i++){for(var r=l[i];" "==r.charAt(0);)r=r.substring(1);if(0==r.indexOf(t))return r.substring(t.length,r.length)}return""}function checkCookie(e){return""!=getCookie(e)}firstScriptTag.parentNode.insertBefore(tag,firstScriptTag),$(window).on("unload",function(e){var t=overlayGallery.find(".carousel").is(":visible");slideData.show=t;var l=JSON.stringify(slideData);setCookie("oldUrl",window.location.href,0,60),setCookie("slideData",l,0,60)});